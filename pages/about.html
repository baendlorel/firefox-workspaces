<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>About firefox-workspaces</title>
  <link rel="stylesheet" href="./style.css" />
  <link rel="shortcut icon" href="./assets/icon-128.png" type="image/x-icon">
</head>

<body>
  <main class="about-dialog">
    <header class="about-header">
      <div class="about-logo">🗂️</div>
      <h1 class="about-title" data-i18n="about.name">firefox-workspaces</h1>
      <div class="about-version" data-i18n="about.version">v0.0.0</div>
    </header>

    <section class="about-description">
      <p class="about-tagline" data-i18n="about.tagline">Implement workspace feature similar to Edge browser in FireFox</p>
      <p class="about-subtitle" data-i18n="about.subtitle">Organize and switch tab groups easily — import/export, color-coded workspaces, and create from open tabs.</p>
    </section>

    <section class="about-features">
      <div class="feature-item">
        <span class="feature-icon">🚀</span>
        <span class="feature-text" data-i18n="about.features.fast">Fast and lightweight</span>
      </div>
      <div class="feature-item">
        <span class="feature-icon">🎨</span>
        <span class="feature-text" data-i18n="about.features.color">Beautiful, color-coded workspaces</span>
      </div>
      <div class="feature-item">
        <span class="feature-icon">💾</span>
        <span class="feature-text" data-i18n="about.features.importExport">Import & export workspaces</span>
      </div>
      <div class="feature-item">
        <span class="feature-icon">⚡</span>
        <span class="feature-text" data-i18n="about.features.createFromTabs">Create workspace from open tabs</span>
      </div>
    </section>

    <nav class="about-links">
      <a class="about-link repo-link" href="https://github.com/baendlorel/firefox-workspaces" target="_blank" rel="noopener noreferrer">
        <span class="link-icon">📁</span>
        <span class="link-text" data-i18n="about.links.repository">Repository</span>
      </a>
      <a class="about-link" href="https://github.com/baendlorel/firefox-workspaces/issues" target="_blank" rel="noopener noreferrer">
        <span class="link-icon">🐛</span>
        <span class="link-text" data-i18n="about.links.reportIssues">Report Issues</span>
      </a>
      <a class="about-link" href="https://github.com/baendlorel/firefox-workspaces/releases" target="_blank" rel="noopener noreferrer">
        <span class="link-icon">📋</span>
        <span class="link-text" data-i18n="about.links.changelog">Changelog</span>
      </a>
    </nav>

    <footer class="about-footer">
      <p class="about-copyright" data-i18n="about.copyright">© Kasukabe Tsumugi • Licensed under MIT</p>
      <p class="about-contact" data-i18n="about.contact">Contact: futami16237@gmail.com</p>
    </footer>
  </main>
  <script>
    (function () {
      // Determine language: ?lang=zh_CN or ?lang=en, otherwise use navigator language
      const params = new URLSearchParams(location.search);
      let lang = params.get('lang');
      if (!lang) {
        const nav = navigator.language || navigator.userLanguage || 'en';
        // map common forms
        if (nav.startsWith('zh')) lang = 'zh_CN';
        else lang = 'en';
      }

      const messagesPath = `../_locales/${lang}/messages.json`;

      function applyMessages(messages) {
        document.querySelectorAll('[data-i18n]').forEach((el) => {
          const key = el.getAttribute('data-i18n');
          if (!key) return;
          const entry = messages[key];
          if (entry && entry.message) el.textContent = entry.message;
        });
      }

      fetch(messagesPath).then((res) => {
        if (!res.ok) throw new Error('Failed to load ' + messagesPath);
        return res.json();
      }).then((json) => {
        applyMessages(json);
      }).catch(() => {
        // fallback to en
        if (lang !== 'en') {
          fetch('../_locales/en/messages.json').then(r => r.json()).then(applyMessages).catch(() => { });
        }
      });
    })();
  </script>
  <script type="module" src="/pages/common.ts"></script>
</body>

</html>